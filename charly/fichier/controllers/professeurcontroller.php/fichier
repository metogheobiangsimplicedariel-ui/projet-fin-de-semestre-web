<?php
class ProfesseurController {
    
    public function mesMatieres() {
        // Vérification session
        session_start();
        if (!isset($_SESSION['user_id']) || $_SESSION['user_type'] !== 'professeur') {
            header('Location: /login.php');
            exit();
        }
        
        // Charger modèle
        require_once __DIR__ . '/../models/MatiereModel.php';
        $matiereModel = new MatiereModel();
        
        // Récupérer matières
        $professeurId = $_SESSION['user_id'];
        $matieres = $matiereModel->getMatieresByProfesseur($professeurId);
        
        // Charger vue
        require_once __DIR__ . '/../views/professeur/mes_matieres.php';
    }
    
    public function saisieNotes() {
        // Vérification session
        session_start();
        if (!isset($_SESSION['user_id']) || $_SESSION['user_type'] !== 'professeur') {
            header('Location: /login.php');
            exit();
        }
        
        // Vérifier paramètre
        if (!isset($_GET['matiere_id'])) {
            die("ID matière manquant");
        }
        
        $matiereId = intval($_GET['matiere_id']);
        
        // Charger modèles
        require_once __DIR__ . '/../models/EtudiantModel.php';
        require_once __DIR__ . '/../models/ColonneModel.php';
        require_once __DIR__ . '/../models/NoteModel.php';
        
        // Récupérer données
        $etudiantModel = new EtudiantModel();
        $colonneModel = new ColonneModel();
        $noteModel = new NoteModel();
        
        $etudiants = $etudiantModel->getEtudiantsByMatiere($matiereId);
        $colonnes = $colonneModel->getColonnesByMatiere($matiereId);
        $notesExistantes = $noteModel->getNotesByMatiere($matiereId);
        
        // Charger vue
        require_once __DIR__ . '/../views/professeur/saisie_notes.php';
    }
}
?>