// Ajouter cette fonction à la fin du script
function initialiserValidation() {
    // Activer la validation en temps réel
    validateur.activerValidationTempsReel();
    
    // Modifier la fonction sauvegarderNote pour inclure la validation
    const originaleSauvegarderNote = window.sauvegarderNote;
    window.sauvegarderNote = function(input) {
        if (!validerAvantSauvegarde(input)) {
            return false;
        }
        return originaleSauvegarderNote.call(this, input);
    };
    
    // Ajouter un bouton de validation globale
    const btnValidation = document.createElement('button');
    btnValidation.className = 'btn btn-warning ms-2';
    btnValidation.innerHTML = '<i class="bi bi-shield-check"></i> Valider toutes les notes';
    btnValidation.onclick = function() {
        const validation = validateur.validerToutesLesNotes();
        if (validation.valide) {
            validateur.afficherNotification(
                ` Toutes les notes sont valides (${validation.totalNotes} notes vérifiées)`,
                'success'
            );
        } else {
            validateur.afficherErreurs(validation.erreurs);
        }
    };
    
    document.querySelector('.d-flex.justify-content-between').appendChild(btnValidation);
}

// Appeler l'initialisation
document.addEventListener('DOMContentLoaded', initialiserValidation);